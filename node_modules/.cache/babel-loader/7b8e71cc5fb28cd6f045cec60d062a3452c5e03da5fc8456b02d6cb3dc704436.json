{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import{Helmet}from'react-helmet-async';import CustomNavbar from'../components/footer-header/Navbar';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Home(){const[navHeight,setNavHeight]=useState(0);const[topArtisans,setTopArtisans]=useState([]);const navigate=useNavigate();const etapes=[{numero:1,texte:\"Choisir la catégorie d’artisanat dans le menu.\"},{numero:2,texte:\"Choisir un artisan.\"},{numero:3,texte:\"Le contacter via le formulaire de contact.\"},{numero:4,texte:\"Une réponse sera apportée sous 48h.\"}];useEffect(()=>{const fetchArtisans=async()=>{try{const response=await axios.get('http://localhost:3001/api/artisans');const sorted=response.data.sort((a,b)=>(b.note||0)-(a.note||0)).slice(0,3);setTopArtisans(sorted);}catch(error){console.error('Erreur lors de la récupération des artisans:',error);}};fetchArtisans();},[]);const renderStars=note=>{const stars=[];for(let i=1;i<=5;i++){stars.push(/*#__PURE__*/_jsx(\"span\",{className:i<=note?'star filled':'star',children:\"\\u2605\"},i));}return/*#__PURE__*/_jsxs(_Fragment,{children:[stars,/*#__PURE__*/_jsxs(\"span\",{className:\"sr-only\",children:[\" \",note,\"/5\"]})]});};const handleCardClick=id=>{navigate(`/artisan/${id}`);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CustomNavbar,{onHeightChange:setNavHeight}),/*#__PURE__*/_jsxs(Helmet,{children:[/*#__PURE__*/_jsx(\"title\",{children:\"Accueil\"}),/*#__PURE__*/_jsx(\"meta\",{name:\"description\",content:\"D\\xE9couvrez les meilleurs artisans pr\\xE8s de chez vous et suivez les \\xE9tapes simples pour les contacter.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"artisans-container\",style:{paddingTop:`${navHeight+20}px`},children:[/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"Comment trouver mon artisan ?\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"subtitle\",children:\"Suivez les \\xE9tapes ci-dessous.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-grid\",children:etapes.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"etape-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:item.numero}),/*#__PURE__*/_jsx(\"p\",{children:item.texte})]},index))}),/*#__PURE__*/_jsx(\"h2\",{className:\"title\",children:\"Nos 3 artisans du mois\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-grid\",children:topArtisans.map(artisan=>{var _artisan$specialite;return/*#__PURE__*/_jsxs(\"div\",{className:\"artisan-card\",style:{cursor:'pointer'},onClick:()=>handleCardClick(artisan.id),children:[/*#__PURE__*/_jsx(\"h3\",{children:artisan.nom}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Sp\\xE9cialit\\xE9 :\"}),\" \",((_artisan$specialite=artisan.specialite)===null||_artisan$specialite===void 0?void 0:_artisan$specialite.nom)||'Non renseignée']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Localisation :\"}),\" \",artisan.ville||'Non précisée']}),/*#__PURE__*/_jsx(\"p\",{className:\"stars\",children:renderStars(artisan.note||0)})]},artisan.id);})})]})]});}export default Home;","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","Helmet","CustomNavbar","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Home","navHeight","setNavHeight","topArtisans","setTopArtisans","navigate","etapes","numero","texte","fetchArtisans","response","get","sorted","data","sort","a","b","note","slice","error","console","renderStars","stars","i","push","className","children","handleCardClick","id","onHeightChange","name","content","style","paddingTop","map","item","index","artisan","_artisan$specialite","cursor","onClick","nom","specialite","ville"],"sources":["/Users/utilisateur/Desktop/En_cours/devoir/miradji_ladhidhou_devoir_trouve_ton_artisan/frontend/src/pages/Home.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { Helmet } from 'react-helmet-async';\nimport CustomNavbar from '../components/footer-header/Navbar';\n\nfunction Home() {\n  const [navHeight, setNavHeight] = useState(0);\n  const [topArtisans, setTopArtisans] = useState([]);\n  const navigate = useNavigate();\n\n  const etapes = [\n    { numero: 1, texte: \"Choisir la catégorie d’artisanat dans le menu.\" },\n    { numero: 2, texte: \"Choisir un artisan.\" },\n    { numero: 3, texte: \"Le contacter via le formulaire de contact.\" },\n    { numero: 4, texte: \"Une réponse sera apportée sous 48h.\" },\n  ];\n\n  useEffect(() => {\n    const fetchArtisans = async () => {\n      try {\n        const response = await axios.get('http://localhost:3001/api/artisans');\n        const sorted = response.data\n          .sort((a, b) => (b.note || 0) - (a.note || 0))\n          .slice(0, 3);\n        setTopArtisans(sorted);\n      } catch (error) {\n        console.error('Erreur lors de la récupération des artisans:', error);\n      }\n    };\n    fetchArtisans();\n  }, []);\n\n  const renderStars = (note) => {\n    const stars = [];\n    for (let i = 1; i <= 5; i++) {\n      stars.push(\n        <span key={i} className={i <= note ? 'star filled' : 'star'}>★</span>\n      );\n    }\n    return (\n      <>\n        {stars}\n        <span className=\"sr-only\"> {note}/5</span>\n      </>\n    );\n  };\n\n  const handleCardClick = (id) => {\n    navigate(`/artisan/${id}`);\n  };\n\n  return (\n    <>\n      <CustomNavbar onHeightChange={setNavHeight} />\n\n      <Helmet>\n        <title>Accueil</title>\n        <meta name=\"description\" content=\"Découvrez les meilleurs artisans près de chez vous et suivez les étapes simples pour les contacter.\" />\n      </Helmet>\n\n      <div className=\"artisans-container\" style={{ paddingTop: `${navHeight + 20}px` }}>\n        <h1 className=\"title\">Comment trouver mon artisan ?</h1>\n        <h2 className=\"subtitle\">Suivez les étapes ci-dessous.</h2>\n\n        <div className=\"card-grid\">\n          {etapes.map((item, index) => (\n            <div key={index} className=\"etape-card\" >\n              <h3>{item.numero}</h3>\n              <p>{item.texte}</p>\n            </div>\n          ))}\n        </div>\n\n        <h2 className=\"title\">Nos 3 artisans du mois</h2>\n\n        <div className=\"card-grid\">\n          {topArtisans.map((artisan) => (\n            <div key={artisan.id} className=\"artisan-card\" style={{ cursor: 'pointer' }} onClick={() => handleCardClick(artisan.id)}>\n              <h3>{artisan.nom}</h3>\n              <p><strong>Spécialité :</strong> {artisan.specialite?.nom || 'Non renseignée'}</p>\n              <p><strong>Localisation :</strong> {artisan.ville || 'Non précisée'}</p>\n              <p className=\"stars\">{renderStars(artisan.note || 0)}</p>\n            </div>\n          ))}\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default Home;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}